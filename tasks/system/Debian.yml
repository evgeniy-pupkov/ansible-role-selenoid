---
- name: APT - Add Docker GPG key
  apt_key:
    url: https://download.docker.com/linux/ubuntu/gpg
    state: present

- name: APT - Add Docker repository
  apt_repository:
    repo: 'deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable'
    state: present
    filename: docker

- name: APT - install misc packages
  apt:
    name: '{{ requirements }}'
    state: present
  register: installed_packages
  until: installed_packages is succeeded
  become: True

- name: APT - install 'docker-ce'
  apt:
    name: docker-ce
    update_cache: True

- name: install deps
  apt:
    update_cache: True
    name:
      - python3-pip

- name: Selenoid | Install certain python modules for docker
  pip:
    state: absent
    name: docker

- name: Selenoid | Install certain python modules for docker
  pip:
    name: docker-py
